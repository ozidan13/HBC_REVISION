<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPC Comprehensive Exam 3: CUDA Programming</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #38bdf8;
            --secondary: #818cf8;
            --accent: #c084fc;
            --background: #0f172a;
            --surface: #1e293b;
            --surface-hover: #334155;
            --text: #f8fafc;
            --text-muted: #94a3b8;
            --success: #4ade80;
            --error: #f87171;
            --warning: #fbbf24;
            --info: #06b6d4;
            /* Cyan for Exam 3 theme */
            --glass-bg: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--background);
            background-image:
                radial-gradient(at 0% 0%, rgba(6, 182, 212, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(56, 189, 248, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(192, 132, 252, 0.05) 0px, transparent 50%);
            background-attachment: fixed;
            color: var(--text);
            line-height: 1.6;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            padding-bottom: 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--info), transparent);
        }

        header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--info), var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            letter-spacing: -1px;
            text-shadow: 0 0 40px rgba(6, 182, 212, 0.2);
        }

        header h2 {
            font-size: 1.5rem;
            color: var(--text-muted);
            font-weight: 400;
            margin-top: 10px;
        }

        header .subtitle {
            font-size: 1.1rem;
            color: var(--info);
            margin-top: 10px;
            font-style: italic;
        }

        /* Q&A Interleaved Layout */
        .qa-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-top: 30px;
        }

        .qa-pair {
            background: rgba(30, 41, 59, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 25px;
            transition: transform 0.2s ease;
        }

        .qa-pair:hover {
            transform: translateY(-2px);
            background: rgba(30, 41, 59, 0.5);
            border-color: rgba(6, 182, 212, 0.3);
        }

        .qa-question {
            font-size: 1.15rem;
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 25px;
            line-height: 1.6;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .qa-answer-block {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            align-items: start;
            display: none;
            /* Hidden by default */
            animation: slideDown 0.4s ease;
        }

        .qa-answer-block.show {
            display: grid;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .qa-answer-block {
                grid-template-columns: 1fr;
            }
        }

        .qa-english,
        .qa-arabic {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.95rem;
            height: 100%;
        }

        .qa-english {
            border-left: 3px solid var(--info);
        }

        .qa-arabic {
            direction: rtl;
            font-family: 'Cairo', sans-serif;
            border-right: 3px solid var(--success);
            text-align: right;
            line-height: 1.8;
        }

        .label-eng {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            margin-bottom: 10px;
            display: block;
            opacity: 0.7;
            color: var(--info);
        }

        .label-ar {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            margin-bottom: 10px;
            display: block;
            opacity: 0.7;
            color: var(--success);
        }

        /* General Question Container Styles */
        .question-block {
            margin-bottom: 60px;
        }

        .question-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .question-number {
            font-family: 'JetBrains Mono', monospace;
            color: var(--info);
            font-size: 1.1rem;
            background: rgba(6, 182, 212, 0.1);
            padding: 6px 12px;
            border-radius: 8px;
            border: 1px solid rgba(6, 182, 212, 0.2);
            font-weight: 700;
        }

        .question-marks {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 600;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 12px;
            border-radius: 20px;
        }

        .answer-button {
            background: linear-gradient(135deg, var(--info), var(--primary));
            color: #fff;
            padding: 10px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.3);
        }

        .answer-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(6, 182, 212, 0.4);
        }

        .section-header {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 60px 0 30px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(to right, #fff, #cbd5e1);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            border-left: 5px solid var(--info);
            padding-left: 20px;
        }

        .section-description {
            color: var(--text-muted);
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 12px;
            font-size: 1rem;
        }

        /* Utilities */
        code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--accent);
            font-size: 0.9em;
            direction: ltr;
            /* Force LTR for code in Arabic text */
            display: inline-block;
        }

        pre {
            background: #09090b !important;
            padding: 20px;
            border-radius: 12px;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
            direction: ltr;
            text-align: left;
        }

        ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .qa-arabic ul {
            padding-right: 20px;
            padding-left: 0;
        }

        li {
            margin-bottom: 8px;
        }

        /* Accessing specific colors for highlighting */
        .highlight {
            color: var(--warning);
            font-weight: bold;
        }

        .formula-box {
            background: rgba(6, 182, 212, 0.1);
            border: 2px solid rgba(6, 182, 212, 0.4);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            color: #a5f3fc;
        }

        footer {
            text-align: center;
            padding: 60px 20px 40px;
            color: var(--text-muted);
            font-size: 0.9rem;
            border-top: 1px solid var(--glass-border);
            margin-top: 80px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸš€ HPC Comprehensive Exam 3</h1>
            <h2>CUDA Programming</h2>
            <p class="subtitle">Thread Hierarchy, Memory Model, Add Vector Implementation</p>
        </header>

        <div class="section-description" style="text-align: center;">
            <p><strong>Total Marks:</strong> 75 | <strong>Time:</strong> 120 Minutes | <strong>Format:</strong> Code
                Analysis, Definitions, Calculations</p>
        </div>

        <!-- SECTION 1: CUDA THREAD HIERARCHY -->
        <h2 class="section-header">Section 1: CUDA Thread Hierarchy (30%)</h2>
        <p class="section-description">Understanding the three-level thread organization: Grid, Blocks, and Threads</p>

        <!-- Question 1 -->
        <div class="question-block">
            <div class="question-meta">
                <span class="question-number">Q1</span>
                <span class="question-marks">12 Marks</span>
            </div>
            <div class="qa-container">
                <div class="qa-pair">
                    <div class="qa-question">
                        <p><strong>Explain the CUDA thread hierarchy in detail.</strong></p>
                        <ol style="margin-top: 10px;">
                            <li>Describe the three levels: Grid, Block, Thread.</li>
                            <li>Explain all built-in variables: <code>threadIdx</code>, <code>blockIdx</code>,
                                <code>blockDim</code>, <code>gridDim</code>.</li>
                            <li>Why are threads organized in blocks?</li>
                        </ol>
                    </div>
                    <button class="answer-button" onclick="toggleAnswer('q1-ans')">ğŸ‘ï¸ Show Answer</button>
                    <div class="qa-answer-block" id="q1-ans">
                        <div class="qa-english">
                            <span class="label-eng">Technical Answer</span>
                            <p><strong>a) Three Levels:</strong></p>
                            <ul>
                                <li><strong>Thread:</strong> Smallest unit of execution. Identified by ID.</li>
                                <li><strong>Block:</strong> Group of threads running on one Streaming Multiprocessor
                                    (SM). Can start up to 1024 threads. Threads in a block can share memory.</li>
                                <li><strong>Grid:</strong> Collection of blocks. Represents the entire kernel launch.
                                </li>
                            </ul>
                            <p><strong>b) Variables:</strong></p>
                            <ul>
                                <li><code>threadIdx</code>: ID of thread inside block (rank).</li>
                                <li><code>blockIdx</code>: ID of block inside grid.</li>
                                <li><code>blockDim</code>: Size of block (how many threads).</li>
                                <li><code>gridDim</code>: Size of grid (how many blocks).</li>
                            </ul>
                            <p><strong>c) Why Blocks?</strong> Scalability. Hardware can run blocks in any order on any
                                available SM. This allows the same code to run on small GPUs (few SMs) and large GPUs
                                (many SMs).</p>
                        </div>
                        <div class="qa-arabic">
                            <span class="label-ar">ØªÙˆØ¶ÙŠØ­ Ù…Ø¨Ø³Ø·</span>
                            <p><strong>Ø§Ù„Ø¬ÙŠØ´ ÙˆØ§Ù„ÙƒØªÙŠØ¨Ø© (Thread Hierarchy): ğŸª–</strong></p>
                            <ul>
                                <li><strong>Ø§Ù„Ø¬ÙŠØ´ ÙƒÙ„Ù‡ (Grid):</strong> Ø¯ÙŠ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø§Ù„Ù„ÙŠ Ø±Ø§ÙŠØ­Ø© ØªØ­Ø§Ø±Ø¨.</li>
                                <li><strong>Ø§Ù„ÙƒØªÙŠØ¨Ø© (Block):</strong> Ø§Ù„Ø¬ÙŠØ´ Ù…ØªÙ‚Ø³Ù… ÙƒØªØ§ÙŠØ¨. ÙƒÙ„ ÙƒØªÙŠØ¨Ø© Ù…Ø³ØªÙ‚Ù„Ø© ÙˆØ¨ØªÙ…Ø´ÙŠ Ù…Ø¹ Ø¨Ø¹Ø¶ØŒ
                                    ÙˆÙ„ÙŠÙ‡Ø§ Ù‚Ø§Ø¦Ø¯.</li>
                                <li><strong>Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ (Thread):</strong> Ø£ØµØºØ± ÙˆØ­Ø¯Ø©. Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ Ø¹Ø§Ø±Ù Ø­Ø§Ø¬ØªÙŠÙ†: Ø±Ù‚Ù… ÙƒØªÙŠØ¨ØªÙ‡
                                    (<code>blockIdx</code>) ÙˆØ±Ù‚Ù…Ù‡ Ø§Ù„Ø´Ø®ØµÙŠ Ø¬ÙˆÙ‡ Ø§Ù„ÙƒØªÙŠØ¨Ø© (<code>threadIdx</code>).</li>
                            </ul>
                            <p><strong>Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª (Ø§Ù„ØªØ¹Ø¯Ø§Ø¯):</strong></p>
                            <ul>
                                <li><code>blockDim</code>: Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ø³Ø§ÙƒØ± ÙÙŠ Ø§Ù„ÙƒØªÙŠØ¨Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© (Ù…Ø«Ù„Ø§Ù‹ 256).</li>
                                <li><code>gridDim</code>: Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ§ÙŠØ¨ ÙÙŠ Ø§Ù„Ø¬ÙŠØ´ ÙƒÙ„Ù‡.</li>
                            </ul>
                            <p><strong>Ù„ÙŠÙ‡ Ø¨Ù†Ù‚Ø³Ù…Ù‡Ù… ÙƒØªØ§ÙŠØ¨ØŸ</strong> Ø¹Ø´Ø§Ù† Ø§Ù„Ù…Ø±ÙˆÙ†Ø©. Ù„Ùˆ Ù…Ø¹Ø§Ù†Ø§ Ø¬Ù†Ø±Ø§Ù„ Ø¹Ù†Ø¯Ù‡ Ù…ÙˆØ§Ø±Ø¯ ÙƒØªÙŠØ± (RTX
                                4090)ØŒ Ù‡ÙŠÙ†Ø²Ù„ 100 ÙƒØªÙŠØ¨Ø© ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯. Ù„Ùˆ Ø¬Ù†Ø±Ø§Ù„ ØºÙ„Ø¨Ø§Ù† (GTX 1050)ØŒ Ù‡ÙŠÙ†Ø²Ù„ ÙƒØªÙŠØ¨ØªÙŠÙ† ÙƒØªÙŠØ¨ØªÙŠÙ†.
                                Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù„Ø®Ø·Ø©) Ù…Ø´ Ø¨ÙŠØªØºÙŠØ±ØŒ Ø¨Ø³ Ø§Ù„ØªÙ†ÙÙŠØ° Ø¨ÙŠØªÙ… Ø­Ø³Ø¨ Ø§Ù„Ù…ØªØ§Ø­.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="question-block">
            <div class="question-meta">
                <span class="question-number">Q2</span>
                <span class="question-marks">10 Marks</span>
            </div>
            <div class="qa-container">
                <div class="qa-pair">
                    <div class="qa-question">
                        <p><strong>Thread Index Calculation and Synchronization</strong></p>
                        <div class="formula-box">tid = blockIdx.x * blockDim.x + threadIdx.x</div>
                        <ol style="margin-top: 10px;">
                            <li>Calculate global thread ID for: Block 10, Thread 50, Block Size 256.</li>
                            <li>Explain <code>__syncthreads()</code> purpose and limitations.</li>
                        </ol>
                    </div>
                    <button class="answer-button" onclick="toggleAnswer('q2-ans')">ğŸ‘ï¸ Show Answer</button>
                    <div class="qa-answer-block" id="q2-ans">
                        <div class="qa-english">
                            <span class="label-eng">Technical Answer</span>
                            <p><strong>a) Calculation:</strong></p>
                            <ul>
                                <li><code>tid = 10 * 256 + 50</code></li>
                                <li><code>tid = 2560 + 50 = 2610</code></li>
                            </ul>
                            <p><strong>b) __syncthreads():</strong></p>
                            <ul>
                                <li><strong>Purpose:</strong> Barrier Synchronization. All threads <em>within a
                                        block</em> must reach this point before any can proceed. Used to ensure shared
                                    memory consistency.</li>
                                <li><strong>Limitation:</strong> Doesn't work across different blocks (Global Sync is
                                    not possible inside a kernel). If placed inside an <code>if</code> condition, all
                                    threads must execute it or deadlock occurs.</li>
                            </ul>
                        </div>
                        <div class="qa-arabic">
                            <span class="label-ar">ØªÙˆØ¶ÙŠØ­ Ù…Ø¨Ø³Ø·</span>
                            <p><strong>Ø­Ø³Ø¨Ø© Ù…ÙƒØ§Ù†Ùƒ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ§Ø¯ (Global ID): ğŸŸï¸</strong></p>
                            <p>ØªØ®ÙŠÙ„ Ø¥Ù†Ùƒ ÙÙŠ Ø§Ø³ØªØ§Ø¯. Ø¹Ø´Ø§Ù† ØªØ¹Ø±Ù Ø±Ù‚Ù… ÙƒØ±Ø³ÙŠÙƒ Ø§Ù„ÙƒÙ„ÙŠ Ù…Ù† Ø£ÙˆÙ„ Ø§Ù„Ø§Ø³ØªØ§Ø¯:</p>
                            <ul>
                                <li>Ø£Ù†Øª ÙÙŠ "Ø¨Ù„ÙˆÙƒ Ø¬Ù…Ø§Ù‡ÙŠØ±" Ø±Ù‚Ù… 10 (<code>blockIdx</code>).</li>
                                <li>ÙƒÙ„ Ø¨Ù„ÙˆÙƒ Ø¨ÙŠØ´ÙŠÙ„ 256 Ù…Ø´Ø¬Ø¹ (<code>blockDim</code>).</li>
                                <li>Ø±Ù‚Ù… ÙƒØ±Ø³ÙŠÙƒ Ø¬ÙˆÙ‡ Ø§Ù„Ø¨Ù„ÙˆÙƒ Ù‡Ùˆ 50 (<code>threadIdx</code>).</li>
                                <li>ÙŠØ¨Ù‚Ù‰ Ù‚Ø¨Ù„Ùƒ ÙÙŠÙ‡ 10 Ø¨Ù„ÙˆÙƒØ§Øª Ù…Ù„ÙŠØ§Ù†ÙŠÙ† (10 Ã— 256 = 2560 Ù…Ø´Ø¬Ø¹).</li>
                                <li>ÙˆØ£Ù†Øª Ø±Ù‚Ù… 50 Ø¹Ù„ÙŠÙ‡Ù…. ÙŠØ¨Ù‚Ù‰ ØªØ±ØªÙŠØ¨Ùƒ Ø§Ù„ÙƒÙ„ÙŠ: 2610.</li>
                            </ul>
                            <p><strong>Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ¬Ù…Ø¹ (Syncthreads): ğŸ›‘</strong></p>
                            <p>Ø²ÙŠ Ù…Ø§ ÙŠÙƒÙˆÙ† Ù‚Ø§Ø¦Ø¯ Ø§Ù„ÙƒØªÙŠØ¨Ø© Ø¨ÙŠÙ‚ÙˆÙ„: "Ù…Ø­Ø¯Ø´ ÙŠØªØ­Ø±Ùƒ Ù…Ù† Ù‡Ù†Ø§ ØºÙŠØ± Ù„Ù…Ø§ Ø§Ù„ÙƒØªÙŠØ¨Ø© ÙƒÙ„Ù‡Ø§ ØªÙˆØµÙ„". Ø¯Ù‡ Ù…Ù‡Ù… Ø¹Ø´Ø§Ù†
                                Ù„Ùˆ ÙˆØ§Ø­Ø¯ Ø¨ÙŠØ·Ø¨Ø® (Ø¨ÙŠÙƒØªØ¨ Ø¯Ø§ØªØ§) ÙˆØ§Ù„ØªØ§Ù†ÙŠ Ù‡ÙŠØ§ÙƒÙ„ (Ø¨ÙŠÙ‚Ø±Ø§ Ø¯Ø§ØªØ§)ØŒ Ù„Ø§Ø²Ù… Ù†ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ø£ÙƒÙ„ Ø®Ù„Øµ Ø§Ù„Ø£ÙˆÙ„.
                                <strong>ØªØ­Ø°ÙŠØ±:</strong> Ø§Ù„Ø£Ù…Ø± Ø¯Ù‡ Ù„Ù„ÙƒØªØ§ÙŠØ¨ Ø¨Ø³ØŒ Ø§Ù„Ø¬ÙŠØ´ ÙƒÙ„Ù‡ (Grid) Ù…Ù„ÙˆØ´ Ù†Ù‚Ø·Ø© ØªØ¬Ù…Ø¹ Ù…Ø´ØªØ±ÙƒØ© ÙˆÙ‡Ùˆ
                                Ø´ØºØ§Ù„.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 2: CUDA Memory Management -->
        <h2 class="section-header">Section 2: CUDA Memory Management (25%)</h2>
        <p class="section-description">Understanding device memory allocation, data transfer, and memory functions.</p>

        <!-- Question 3 -->
        <div class="question-block">
            <div class="question-meta">
                <span class="question-number">Q3</span>
                <span class="question-marks">10 Marks</span>
            </div>
            <div class="qa-container">
                <div class="qa-pair">
                    <div class="qa-question">
                        <p><strong>Explain CUDA memory management functions.</strong></p>
                        <ul>
                            <li><code>cudaMalloc()</code></li>
                            <li><code>cudaMemcpy()</code> (and transfer directions)</li>
                            <li><code>cudaFree()</code></li>
                        </ul>
                    </div>
                    <button class="answer-button" onclick="toggleAnswer('q3-ans')">ğŸ‘ï¸ Show Answer</button>
                    <div class="qa-answer-block" id="q3-ans">
                        <div class="qa-english">
                            <span class="label-eng">Technical Answer</span>
                            <ul>
                                <li><strong>cudaMalloc:</strong> Allocates object in the device Global Memory. Returns a
                                    pointer accessible only by the GPU.</li>
                                <li><strong>cudaMemcpy:</strong> Data transfer.
                                    <br><code>HostToDevice</code>: Input data CPU -> GPU.
                                    <br><code>DeviceToHost</code>: Results GPU -> CPU.
                                    <br>Bottleneck: PCIe bus speed is slow compared to memory bandwidth.
                                </li>
                                <li><strong>cudaFree:</strong> Deallocates device memory. Essential to prevent memory
                                    leaks on limited GPU VRAM.</li>
                            </ul>
                        </div>
                        <div class="qa-arabic">
                            <span class="label-ar">ØªÙˆØ¶ÙŠØ­ Ù…Ø¨Ø³Ø·</span>
                            <p><strong>Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø·Ø§Ø± (Memory Mgmt): âœˆï¸</strong></p>
                            <ul>
                                <li><strong>cudaMalloc (Ø­Ø¬Ø² Ø§Ù„ÙÙ†Ø¯Ù‚):</strong> Ø¨ØªØ­Ø¬Ø² Ù…ÙƒØ§Ù† ÙÙŠ "Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ù€ GPU". Ø§Ù„Ù…ÙƒØ§Ù† Ø¯Ù‡
                                    Ù‡Ù†Ø§Ùƒ Ø¨Ø³ØŒ Ù…Ø­Ø¯Ø´ Ù…Ù† "Ø§Ù„Ø¨Ù„Ø¯ Ø§Ù„Ø£Ù…" (CPU) ÙŠÙ‚Ø¯Ø± ÙŠØ±ÙˆØ­Ù‡ Ù…Ø´ÙŠ.</li>
                                <li><strong>cudaMemcpy (Ø§Ù„Ø´Ø­Ù†):</strong>
                                    <br> - <code>HostToDevice</code>: Ø¨ØªØ´Ø­Ù† Ø§Ù„Ø´Ù†Ø· (Input Data) Ù…Ù† Ø§Ù„Ø¨Ù„Ø¯ Ù„Ù„Ø¬Ø²ÙŠØ±Ø© Ø¹Ø´Ø§Ù†
                                    Ø§Ù„Ø´ØºÙ„ ÙŠØ¨Ø¯Ø£.
                                    <br> - <code>DeviceToHost</code>: Ø¨Ø¹Ø¯ Ù…Ø§ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© ØªØ®Ù„ØµØŒ Ø¨ØªØ´Ø­Ù† Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ (Results) Ø±Ø§Ø¬Ø¹
                                    Ù„Ù„Ø¨Ù„Ø¯.
                                    <br> *Ø§Ù„Ù†Ù‚Ù„ Ø¯Ù‡ Ø¨ÙŠØªÙ… Ø¹Ù† Ø·Ø±ÙŠÙ‚ "ÙƒÙˆØ¨Ø±ÙŠ" Ø§Ø³Ù…Ù‡ PCIeØŒ ÙˆØ¯Ù‡ Ø£Ø¨Ø·Ø£ Ø­Ø§Ø¬Ø© ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙƒÙ„Ù‡Ø§ØŒ ÙØ­Ø§ÙˆÙ„
                                    ØªÙ‚Ù„Ù„Ù‡.*
                                </li>
                                <li><strong>cudaFree (Check-out):</strong> Ù„Ø§Ø²Ù… ØªØ³ÙŠØ¨ Ø§Ù„ØºØ±ÙØ© Ù„Ù…Ø§ ØªÙ…Ø´ÙŠØŒ Ø¹Ø´Ø§Ù† Ø§Ù„Ù€ GPU
                                    Ù…Ø³Ø§Ø­ØªÙ‡ ÙØªØ§ÙÙŠØª (VRAM ØºØ§Ù„ÙŠØ© ÙˆÙ…Ø­Ø¯ÙˆØ¯Ø©). Ù„Ùˆ Ù…Ø®Ø±Ø¬ØªØ´ØŒ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù‡ØªØªÙ…Ù„ÙŠ ÙˆØ§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ§Ù†ÙŠØ©
                                    Ù‡ØªÙ‡Ù†Ø¬.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 4 -->
        <div class="question-block">
            <div class="question-meta">
                <span class="question-number">Q4</span>
                <span class="question-marks">9 Marks</span>
            </div>
            <div class="qa-container">
                <div class="qa-pair">
                    <div class="qa-question">
                        <p><strong>Kernel Launch Configuration</strong></p>
                        <div class="formula-box">myKernel<<<gridSize, blockSize>>>(...)</div>
                        <ol style="margin-top: 10px;">
                            <li>How to calculate <code>gridSize</code> for <code>N</code> elements with
                                <code>blockSize</code> B?</li>
                            <li>Why do we use the formula <code>(N + B - 1) / B</code>?</li>
                        </ol>
                    </div>
                    <button class="answer-button" onclick="toggleAnswer('q4-ans')">ğŸ‘ï¸ Show Answer</button>
                    <div class="qa-answer-block" id="q4-ans">
                        <div class="qa-english">
                            <span class="label-eng">Technical Answer</span>
                            <p><strong>Calculation:</strong></p>
                            <p><code>gridSize = (N + B - 1) / B</code> (Equivalent to Ceiling function).</p>
                            <p><strong>Why:</strong> Integer division rounds down. If we have 100 elements and block
                                size 32:</p>
                            <ul>
                                <li><code>100 / 32 = 3</code> blocks. 3 * 32 = 96 threads. 4 elements are left
                                    unprocessed!</li>
                                <li><code>(100 + 31) / 32 = 131 / 32 = 4</code> blocks. 4 * 32 = 128 threads. All 100
                                    elements covered (plus 28 extra threads).</li>
                            </ul>
                        </div>
                        <div class="qa-arabic">
                            <span class="label-ar">ØªÙˆØ¶ÙŠØ­ Ù…Ø¨Ø³Ø·</span>
                            <p><strong>Ø­Ø³Ø¨Ø© Ø§Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ø§ØµØ§Øª: ğŸš</strong></p>
                            <p>Ù…Ø¹Ø§Ùƒ 100 Ø´Ø®Øµ (N) ÙˆØ¹Ø§ÙŠØ² ØªÙ†Ù‚Ù„Ù‡Ù…ØŒ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ø§Øµ Ø¨ÙŠØ´ÙŠÙ„ 32 (B).</p>
                            <ul>
                                <li>Ù„Ùˆ Ù‚Ø³Ù…Øª 100 Ø¹Ù„Ù‰ 32 Ù‡ÙŠØ·Ù„Ø¹Ù„Ùƒ 3.125.</li>
                                <li>ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© (Integers)ØŒ Ø§Ù„ÙƒØ³ÙˆØ± Ø¨ØªØ·ÙŠØ± ÙˆØ¨ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ø±Ù‚Ù… 3.</li>
                                <li>Ù„Ùˆ Ø¬Ø¨Øª 3 Ù…ÙŠÙƒØ±ÙˆØ¨Ø§ØµØ§Øª Ø¨Ø³ØŒ Ù‡ÙŠØ´ÙŠÙ„ÙˆØ§ 96 ÙˆØ§Ø­Ø¯. ÙˆÙÙŠÙ‡ 4 ØºÙ„Ø§Ø¨Ø© Ù‡ÙŠÙ‚ÙÙˆØ§ ÙÙŠ Ø§Ù„Ø´Ø§Ø±Ø¹!</li>
                                <li><strong>Ø§Ù„Ø­Ù„:</strong> Ù„Ø§Ø²Ù… "ØªØ¬Ø¨Ø± Ø§Ù„ÙƒØ³Ø±". Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© <code>(N + B - 1) / B</code> Ø¯ÙŠ
                                    Ø·Ø±ÙŠÙ‚Ø© Ø°ÙƒÙŠØ© Ø¹Ø´Ø§Ù† Ù†Ø®Ù„ÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙŠÙ‚Ø±Ø¨ Ù„Ø£Ù‚Ø±Ø¨ Ø±Ù‚Ù… ØµØ­ÙŠØ­ <strong>Ø¨Ø§Ù„Ø²ÙŠØ§Ø¯Ø©</strong>. ÙŠØ¹Ù†ÙŠ
                                    Ù‡Ù†Ø¬ÙŠØ¨ 4 Ù…ÙŠÙƒØ±ÙˆØ¨Ø§ØµØ§ØªØŒ Ø­ØªÙ‰ Ù„Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù‡ÙŠØ±ÙƒØ¨ ÙÙŠÙ‡ 4 Ø£Ù†ÙØ§Ø± Ø¨Ø³ ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ ÙØ§Ø¶ÙŠ. Ø£Ù‡Ù… Ø­Ø§Ø¬Ø© Ù…Ø­Ø¯Ø´
                                    ÙŠÙØ¶Ù„ ÙÙŠ Ø§Ù„Ø´Ø§Ø±Ø¹.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 3: Add Vector Implementation -->
        <h2 class="section-header">Section 3: Add Vector Implementation (45%)</h2>
        <p class="section-description">THE MAIN PROGRAM - Complete analysis of CUDA vector addition kernel and host
            code.</p>

        <!-- Question 5 -->
        <div class="question-block">
            <div class="question-meta">
                <span class="question-number">Q5</span>
                <span class="question-marks">15 Marks</span>
            </div>
            <div class="qa-container">
                <div class="qa-pair">
                    <div class="qa-question">
                        <p><strong>Analyze the Add Vector kernel.</strong></p>
                        <pre style="direction: ltr; text-align: left;">
__global__ void addVec(float *A, float *B, float *C, int N) {
    int i = blockIdx.x * blockDim.x + threadIdx.x;
    if (i < N) {
        C[i] = A[i] + B[i];
    }
}
                        </pre>
                        <ol style="margin-top: 10px;">
                            <li>Explain <code>__global__</code> keyword.</li>
                            <li>Why is the <code>if (i < N)</code> check necessary?</li>
                        </ol>
                    </div>
                    <button class="answer-button" onclick="toggleAnswer('q5-ans')">ğŸ‘ï¸ Show Answer</button>
                    <div class="qa-answer-block" id="q5-ans">
                        <div class="qa-english">
                            <span class="label-eng">Technical Answer</span>
                            <ul>
                                <li><strong>__global__:</strong> Indicates a kernel function. Callable from Host,
                                    Executed on Device. Must return void.</li>
                                <li><strong>if (i < N):</strong> Boundary Check. Since we rounded up the grid size
                                            (Launch Configuration), we launched more threads than N.
                                            <br>Example: N=100, Threads=128. Threads 100-127 have indices >= N. If they
                                            access memory <code>A[i]</code>, it's an Out-of-Bounds Error (Segmentation
                                            Fault or invalid data). The check ensures they do nothing.
                                </li>
                            </ul>
                        </div>
                        <div class="qa-arabic">
                            <span class="label-ar">ØªÙˆØ¶ÙŠØ­ Ù…Ø¨Ø³Ø·</span>
                            <p><strong>ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯: ğŸ”</strong></p>
                            <ul>
                                <li><strong>__global__:</strong> Ø¯Ù‡ "Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠ" Ø§Ù„Ù„ÙŠ Ø¨ÙŠØ·Ù„Ø¹ Ù…Ù† Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© (Host) Ù„Ù„Ø¬Ù†ÙˆØ¯
                                    ÙÙŠ Ø§Ù„Ù…ÙŠØ¯Ø§Ù† (Device).</li>
                                <li><strong>if (i < N) (Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙØªÙŠØ´):</strong> ÙØ§ÙƒØ± Ø§Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ø§Øµ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ù„ÙŠ ÙƒØ§Ù† ÙØ§Ø¶ÙŠØŸ
                                            (Ø³Ø¤Ø§Ù„ 4).</li>
                                <li>Ø§Ø­Ù†Ø§ Ø¬Ø¨Ù†Ø§ 128 ÙƒØ±Ø³ÙŠ (Threads) Ø¹Ø´Ø§Ù† 100 Ø¶ÙŠÙ (N).</li>
                                <li>Ø§Ù„Ø¶ÙŠÙˆÙ Ø±Ù‚Ù… 100 Ù„Ø­Ø¯ 127 ÙƒØ±Ø§Ø³ÙŠ ÙØ§Ø¶ÙŠØ© (Ø²ÙŠØ§Ø¯Ø©).</li>
                                <li>Ù„Ùˆ Ø§Ù„ÙƒØ±Ø§Ø³ÙŠ Ø¯ÙŠ Ø­Ø§ÙˆÙ„Øª "ØªØ§ÙƒÙ„" Ù…Ù† Ø§Ù„Ø·Ø¨Ù‚ (Access Memory)ØŒ Ù‡ÙŠØ¶Ø±Ø¨ÙˆØ§ ÙÙŠ Ø§Ù„Ù‡ÙˆØ§ Ø£Ùˆ ÙŠØ§Ø®Ø¯ÙˆØ§ Ø£ÙƒÙ„
                                    Ù…Ø´ Ø¨ØªØ§Ø¹Ù‡Ù….</li>
                                <li>Ø§Ù„Ø´Ø±Ø· Ø¯Ù‡ Ø¨ÙŠÙ‚ÙˆÙ„: "Ù„Ùˆ Ø±Ù‚Ù…Ùƒ Ø£ÙƒØ¨Ø± Ù…Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ø²ÙŠÙ…ØŒ Ø§Ù‚Ø¹Ø¯ Ø³Ø§ÙƒØª ÙˆÙ…Ø§ØªØ¹Ù…Ù„Ø´ Ø­Ø§Ø¬Ø©". Ø¯ÙˆÙ„ "ØªÙƒÙ…Ù„Ø©
                                    Ø¹Ø¯Ø¯" Ø¹Ø´Ø§Ù† Ø§Ù„ÙƒØªÙŠØ¨Ø© ØªÙƒØªÙ…Ù„ØŒ Ø¨Ø³ Ù…Ø§Ù„Ù‡Ù…Ø´ Ø´ØºÙ„.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 6 -->
        <div class="question-block">
            <div class="question-meta">
                <span class="question-number">Q6</span>
                <span class="question-marks">19 Marks</span>
            </div>
            <div class="qa-container">
                <div class="qa-pair">
                    <div class="qa-question">
                        <p><strong>Writing complete Host Code.</strong> Explain the 4 main phases of data flow.</p>
                    </div>
                    <button class="answer-button" onclick="toggleAnswer('q6-ans')">ğŸ‘ï¸ Show Answer</button>
                    <div class="qa-answer-block" id="q6-ans">
                        <div class="qa-english">
                            <span class="label-eng">Technical Answer</span>
                            <p><strong>The 4 Phases:</strong></p>
                            <ol>
                                <li><strong>Allocation & Init (Host):</strong> Malloc h_A, h_B. Initialize data. Malloc
                                    d_A, d_B on GPU.</li>
                                <li><strong>Transfer H2D:</strong>
                                    <code>cudaMemcpy(d_A, h_A, size, HostToDevice)</code>. Move input to GPU.</li>
                                <li><strong>Kernel Launch:</strong> <code>addVec<<<grid, block>>>(d_A...)</code>. GPU
                                    calculates C = A + B. Results sit in d_C.</li>
                                <li><strong>Transfer D2H:</strong>
                                    <code>cudaMemcpy(h_C, d_C, size, DeviceToHost)</code>. Move result back to CPU to
                                    print/verify.</li>
                            </ol>
                            <p><strong>Critical Mistake:</strong> Forgetting Step 4 means the CPU array <code>h_C</code>
                                contains garbage, even if GPU calculated correctly.</p>
                        </div>
                        <div class="qa-arabic">
                            <span class="label-ar">ØªÙˆØ¶ÙŠØ­ Ù…Ø¨Ø³Ø·</span>
                            <p><strong>Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ (Ø§Ù„Ø±Ø­Ù„Ø©): ğŸ”„</strong></p>
                            <ol>
                                <li><strong>Ø§Ù„ØªØ¬Ù‡ÙŠØ² (Alloc):</strong> Ø¨Ù†Ø­Ø¶Ø± Ø§Ù„Ø´Ù†Ø· ÙÙŠ Ø§Ù„Ø¨ÙŠØª (CPU) ÙˆÙ†Ø­Ø¬Ø² Ø§Ù„ÙÙ†Ø¯Ù‚ ÙÙŠ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©
                                    (GPU).</li>
                                <li><strong>Ø§Ù„Ø³ÙØ± (H2D):</strong> Ø¨Ù†Ø§Ø®Ø¯ Ø§Ù„Ø´Ù†Ø· ÙˆÙ†Ø±ÙˆØ­ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©. (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø®Ø·ÙˆØ© Ø¯ÙŠØŒ Ø§Ù„Ù€ GPU
                                    Ù‡ÙŠØ´ØªØºÙ„ Ø¹Ù„Ù‰ Ù‡ÙˆØ§!).</li>
                                <li><strong>Ø§Ù„Ø´ØºÙ„ (Kernel):</strong> Ø§Ù„Ø¹Ù…Ø§Ù„ ÙÙŠ Ø§Ù„Ø¬Ø²ÙŠØ±Ø© Ø¨ÙŠØ´ØªØºÙ„ÙˆØ§ ÙˆÙŠØ·Ù„Ø¹ÙˆØ§ Ø¥Ù†ØªØ§Ø¬ (C).
                                    Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø¯Ù‡ Ù„Ø³Ù‡ Ù‡Ù†Ø§Ùƒ ÙÙŠ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©.</li>
                                <li><strong>Ø§Ù„Ø¹ÙˆØ¯Ø© (D2H):</strong> Ø¨Ù†Ø´Ø­Ù† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ ÙˆÙ†Ø±Ø¬Ø¹Ù‡ Ø§Ù„Ø¨ÙŠØª (CPU) Ø¹Ø´Ø§Ù† Ù†Ù‚Ø¯Ø± Ù†Ø´ÙˆÙÙ‡
                                    ÙˆÙ†Ø³ØªØ®Ø¯Ù…Ù‡. Ù„Ùˆ Ù†Ø³ÙŠØª Ø§Ù„Ø®Ø·ÙˆØ© Ø¯ÙŠØŒ ÙƒØ£Ù†Ùƒ Ø§Ø´ØªØºÙ„Øª ÙˆÙ…Ù‚Ø¨Ø¶ØªØ´ØŒ ÙˆØ§Ù„Ù†ØªØ¬ÙŠØ© Ø§Ù„Ù„ÙŠ Ù…Ø¹Ø§Ùƒ ÙÙŠ Ø§Ù„Ø¨ÙŠØª Ù‡ØªØ¨Ù‚Ù‰
                                    "Ø²Ø¨Ø§Ù„Ø©" (Garbage Values).</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <footer>
        <p><strong>ğŸš€ HPC Comprehensive Exam 3: CUDA Programming</strong></p>
        <p>Covering Lectures 7 & 8</p>
        <p style="margin-top: 15px; color: #64748b;">Ø§Ù…ØªØ­Ø§Ù† Ø´Ø§Ù…Ù„ - Focus on Practical Implementation</p>
        <p style="margin-top: 10px; font-size: 0.9em;">Good Luck! ğŸš€</p>
    </footer>

    <script>
        function toggleAnswer(id) {
            const answer = document.getElementById(id);
            answer.classList.toggle('show');
            if (answer.classList.contains('show')) {
                setTimeout(() => {
                    answer.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest'
                    });
                }, 100);
            }
        }

        // Keyboard shortcut: Ctrl+A to toggle all answers
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                const answers = document.querySelectorAll('.qa-answer-block');
                const allShown = Array.from(answers).every(a => a.classList.contains('show'));
                answers.forEach(answer => {
                    if (allShown) {
                        answer.classList.remove('show');
                    } else {
                        answer.classList.add('show');
                    }
                });
            }
        });
    </script>
</body>

</html>