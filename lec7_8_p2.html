<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPC Exam: CUDA Implementation - Add Vector & Memory Management</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;400;600;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #38bdf8;
            --secondary: #818cf8;
            --accent: #c084fc;
            --background: #0f172a;
            --surface: #1e293b;
            --text: #f8fafc;
            --text-muted: #94a3b8;
            --success: #4ade80;
            --error: #f87171;
            --warning: #fbbf24;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--background);
            background-image:
                radial-gradient(at 0% 0%, rgba(56, 189, 248, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(139, 92, 246, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(192, 132, 252, 0.05) 0px, transparent 50%);
            background-attachment: fixed;
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            padding-bottom: 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(to right, #38bdf8, #818cf8, #c084fc);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            letter-spacing: -1px;
            text-shadow: 0 0 40px rgba(56, 189, 248, 0.2);
        }

        header h2 {
            font-size: 1.5rem;
            color: var(--text-muted);
            font-weight: 400;
            margin-top: 10px;
        }

        /* Q&A Interleaved Layout */
        .qa-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin-top: 30px;
        }

        .qa-pair {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            padding-bottom: 30px;
        }

        .qa-pair:last-child {
            border-bottom: none;
        }

        .qa-question {
            font-size: 1.15rem;
            font-weight: 500;
            color: #e2e8f0;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .qa-answer-block {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            align-items: start;
        }

        .qa-english,
        .qa-arabic {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.95rem;
            /* Slightly smaller for density */
        }

        .qa-english {
            border-left: 3px solid var(--primary);
        }

        .qa-arabic {
            direction: rtl;
            font-family: 'Cairo', sans-serif;
            border-right: 3px solid var(--success);
            text-align: right;
            line-height: 1.8;
        }

        .label-eng,
        .label-ar {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            margin-bottom: 10px;
            display: block;
            opacity: 0.7;
        }

        .label-eng {
            color: var(--primary);
        }

        .label-ar {
            color: var(--success);
        }

        /* General Question Container */
        .question {
            background: rgba(17, 24, 39, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(16px);
            border-radius: 24px;
            padding: 35px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .question::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), transparent);
            opacity: 0.8;
            border-radius: 24px 24px 0 0;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .question-number {
            font-family: 'JetBrains Mono', monospace;
            color: var(--primary);
            font-size: 1.1rem;
            background: rgba(56, 189, 248, 0.1);
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid rgba(56, 189, 248, 0.2);
            font-weight: 700;
        }

        .question-marks {
            font-size: 0.95rem;
            color: var(--text-muted);
            font-weight: 600;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 12px;
            border-radius: 20px;
        }

        .question h3 {
            margin-top: 0;
            font-size: 1.4rem;
            color: var(--text);
            margin-bottom: 10px;
        }

        /* Utilities */
        code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--accent);
            font-size: 0.9em;
        }

        pre {
            background: #09090b !important;
            padding: 20px;
            border-radius: 12px;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
        }

        .reference {
            margin-top: 20px;
            padding: 15px;
            background: rgba(148, 163, 184, 0.05);
            border-left: 2px solid var(--text-muted);
            font-size: 0.85rem;
            color: var(--text-muted);
            border-radius: 0 8px 8px 0;
        }

        .highlight {
            color: var(--warning);
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .qa-answer-block {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2.5rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸš€ High Performance Computing Exam</h1>
            <h2>Lecture 7-8 Part 2: CUDA Implementation</h2>
            <p style="margin-top: 15px; color: #cbd5e1;">Add Vector Program, Memory Management & GPU Architecture</p>
            <div class="important-badge">â­ THE MAIN CUDA PROGRAMMING EXAM â­</div>
        </header>

        <div class="exam-info">
            <h3>ğŸ“‹ Exam Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <strong>Total Questions:</strong>
                    12 Questions
                </div>
                <div class="info-item">
                    <strong>Total Marks:</strong>
                    60 Marks
                </div>
                <div class="info-item">
                    <strong>Time Allowed:</strong>
                    90 Minutes
                </div>
                <div class="info-item">
                    <strong>Focus:</strong>
                    Add Vector Program (50% weight!)
                </div>
            </div>
        </div>

        <!-- SECTION 1: ADD VECTOR PROGRAM (THE MAIN ONE!) -->
        <div class="section section-addvector">
            <h2 class="section-header">â­ Section 1: Add Vector Program - THE MAIN PROGRAM (50%)</h2>
            <p class="section-description">
                This is THE CORE EXAM TOPIC - Complete CUDA Vector Addition implementation with kernel, memory
                management, and execution
            </p>

            <!-- Question 1 - THE BIG ONE -->
            <div class="question">
                <div class="question-header">
                    <span class="question-number">Question 1 â­ MOST IMPORTANT</span>
                    <span class="question-marks">20 marks</span>
                </div>

                <div class="question-content">
                    <div class="critical-box">
                        <h4>ğŸ¯ COMPLETE ADD VECTOR CUDA PROGRAM</h4>
                        <p>Write a complete CUDA program to perform vector addition: <strong>C[i] = A[i] + B[i]</strong>
                        </p>
                        <p style="margin-top: 10px;"><strong>Requirements:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>N = 1024 elements (vector size)</li>
                            <li>Use 256 threads per block</li>
                            <li>Each thread computes ONE element</li>
                        </ul>
                    </div>
                </div>

                <div class="qa-container">
                    <!-- Part A -->
                    <div class="qa-pair">
                        <div class="qa-question">
                            <strong>Part A - Kernel Function (5 marks):</strong><br>
                            Write the complete <code>__global__ void vecAdd(float *A, float *B, float *C, int N)</code>
                            kernel.<br>
                            Must include: thread index calculation and array element computation.
                        </div>
                        <div class="qa-answer-block">
                            <div class="qa-english">
                                <div class="label-eng">Answer Code</div>
                                <div class="code-block">
                                    <div class="code-line"><span class="code-keyword">__global__</span> <span
                                            class="code-keyword">void</span> <span
                                            class="code-function">vecAdd</span>(<span class="code-type">float</span> *A,
                                        <span class="code-type">float</span> *B, <span class="code-type">float</span>
                                        *C, <span class="code-type">int</span> N) {
                                    </div>
                                    <div class="code-line"> <span class="code-type">int</span> i = blockIdx.x *
                                        blockDim.x + threadIdx.x;</div>
                                    <div class="code-line"> <span class="code-keyword">if</span> (i < N) {</div>
                                            <div class="code-line"> C[i] = A[i] + B[i];</div>
                                            <div class="code-line"> }</div>
                                            <div class="code-line">}</div>
                                    </div>
                                    <p><strong>Why boundary check?</strong> To prevent out-of-bounds access when total
                                        threads > N.</p>
                                </div>
                                <div class="qa-arabic">
                                    <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                    <p>Ø£ÙˆÙ„ Ø­Ø§Ø¬Ø© Ø¨Ù†Ø­Ø³Ø¨ Ø§Ù„Ù€ Global Index (<code>i</code>) Ø¹Ø´Ø§Ù† ÙƒÙ„ thread ÙŠØ¹Ø±Ù Ù‡Ùˆ Ù…Ø§Ø³Ùƒ Ø§Ù†Ù‡ÙŠ
                                        Ø¹Ù†ØµØ±.</p>
                                    <p>Ø¨Ù…Ø¹Ø§Ø¯Ù„Ø©: <code>Ø±Ù‚Ù… Ø§Ù„Ø¨Ù„ÙˆÙƒ Ã— Ø­Ø¬Ù… Ø§Ù„Ø¨Ù„ÙˆÙƒ + Ø±Ù‚Ù… Ø§Ù„Ù€ thread</code>.</p>
                                    <p>ÙˆÙ„Ø§Ø²Ù… Ø´Ø±Ø· <code>if (i < N)</code> Ø¹Ø´Ø§Ù† Ù„Ùˆ Ø¹Ø¯Ø¯ Ø§Ù„Ù€ threads Ø§Ù„Ù…ØªÙˆÙØ±Ø© Ø£ÙƒØªØ± Ù…Ù† Ø­Ø¬Ù…
                                        Ø§Ù„Ù…ØµÙÙˆÙØ©ØŒ Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø¯ÙˆÙ„ Ù…ÙŠØ¨ÙˆØ¸ÙˆØ´ Ø§Ù„Ø¯Ù†ÙŠØ§ (Memory Corruption).</p>
                                </div>
                            </div>
                        </div>

                        <!-- Part B -->
                        <div class="qa-pair">
                            <div class="qa-question">
                                <strong>Part B - Host Memory Allocation (2 marks):</strong><br>
                                Allocate host arrays h_A, h_B, h_C and initialize h_A and h_B with sample data.
                            </div>
                            <div class="qa-answer-block">
                                <div class="qa-english">
                                    <div class="label-eng">Answer Code</div>
                                    <div class="code-block">
                                        <div class="code-line"><span class="code-type">size_t</span> bytes = N * <span
                                                class="code-keyword">sizeof</span>(<span
                                                class="code-type">float</span>);</div>
                                        <div class="code-line"><span class="code-type">float</span> *h_A = (<span
                                                class="code-type">float</span>*)malloc(bytes);</div>
                                        <div class="code-line"><span class="code-type">float</span> *h_B = (<span
                                                class="code-type">float</span>*)malloc(bytes);</div>
                                        <div class="code-line"><span class="code-type">float</span> *h_C = (<span
                                                class="code-type">float</span>*)malloc(bytes);</div>
                                        <div class="code-line"><span class="code-keyword">for</span>(<span
                                                class="code-type">int</span> i=0; i<N; i++) {</div>
                                                <div class="code-line"> h_A[i] = 1.0f; h_B[i] = 2.0f;</div>
                                                <div class="code-line">}</div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ø¯Ù‡ Ø´ØºÙ„ C++ Ø¹Ø§Ø¯ÙŠ (Host Code). Ø¨Ù†Ø­Ø¬Ø² Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ø±Ø§Ù…Ø§Øª (RAM) Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…
                                            <code>malloc</code> ÙˆØ¨Ù†Ø¯ÙŠÙ‡Ù… Ù‚ÙŠÙ… Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¹Ø´Ø§Ù† Ù†Ø¬Ù…Ø¹Ù‡Ø§.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part C -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part C - Device Memory Allocation (3 marks):</strong><br>
                                    Use cudaMalloc() to allocate device arrays d_A, d_B, d_C.
                                </div>
                                <div class="qa-answer-block">
                                    <div class="qa-english">
                                        <div class="label-eng">Answer Code</div>
                                        <div class="code-block">
                                            <div class="code-line"><span class="code-type">float</span> *d_A, *d_B,
                                                *d_C;</div>
                                            <div class="code-line">cudaMalloc(&d_A, bytes);</div>
                                            <div class="code-line">cudaMalloc(&d_B, bytes);</div>
                                            <div class="code-line">cudaMalloc(&d_C, bytes);</div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø¨Ù†Ø­Ø¬Ø² Ù…ÙƒØ§Ù† ÙÙŠ ÙƒØ§Ø±Øª Ø§Ù„Ø´Ø§Ø´Ø© (GPU Memory). Ø§Ù„Ø¯Ø§Ù„Ø© <code>cudaMalloc</code>
                                            Ø´Ø¨Ù‡ malloc Ø¨Ø³ Ø¨ØªØ§Ø®Ø¯ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø¤Ø´Ø± (Pointer to pointer) Ø¹Ø´Ø§Ù† ØªØ±Ø¬Ø¹Ù„Ùƒ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
                                            Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙŠÙ‡.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part D -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part D - Host to Device Memory Transfer (2 marks):</strong><br>
                                    Use cudaMemcpy() to copy h_A and h_B to d_A and d_B.
                                </div>
                                <div class="qa-answer-block">
                                    <div class="qa-english">
                                        <div class="label-eng">Answer Code</div>
                                        <div class="code-block">
                                            <div class="code-line">cudaMemcpy(d_A, h_A, bytes, cudaMemcpyHostToDevice);
                                            </div>
                                            <div class="code-line">cudaMemcpy(d_B, h_B, bytes, cudaMemcpyHostToDevice);
                                            </div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ø¨Ù†Ù†Ù‚Ù„ Ø§Ù„Ø¯Ø§ØªØ§ Ù…Ù† Ø§Ù„Ø±Ø§Ù…Ø§Øª (Host) Ù„Ù„ÙƒØ§Ø±Øª (Device). Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ ØªØ­Ø¯Ø¯ Ø§Ù„Ø§ØªØ¬Ø§Ù‡:
                                            <code>cudaMemcpyHostToDevice</code>.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part E -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part E - Kernel Launch Configuration (3 marks):</strong><br>
                                    Calculate number of blocks needed and launch kernel with correct syntax.
                                </div>
                                <div class="qa-answer-block">
                                    <div class="qa-english">
                                        <div class="label-eng">Answer Code</div>
                                        <div class="code-block">
                                            <div class="code-line"><span class="code-type">int</span> threadsPerBlock =
                                                256;</div>
                                            <div class="code-line"><span class="code-type">int</span> blocksPerGrid = (N
                                                + threadsPerBlock - 1) / threadsPerBlock;</div>
                                            <div class="code-line">vecAdd<<<blocksPerGrid, threadsPerBlock>>>(d_A, d_B,
                                                    d_C, N);</div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ø¨Ù†Ø­Ø³Ø¨ Ù…Ø­ØªØ§Ø¬ÙŠÙ† ÙƒØ§Ù… Ø¨Ù„ÙˆÙƒ Ø¹Ø´Ø§Ù† Ù†ØºØ·ÙŠ Ø§Ù„Ù€ 1024 Ø¹Ù†ØµØ±. Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©
                                            <code>(N + 255) / 256</code> Ø¨ØªØ¶Ù…Ù† Ø¥Ù†Ù†Ø§ Ù†Ù‚Ø±Ø¨ Ù„Ù„Ø£ÙƒØ¨Ø± (Ceiling) Ø¹Ø´Ø§Ù† Ù„Ùˆ Ø§Ù„Ø±Ù‚Ù…
                                            Ù…Ø´ Ø¨ÙŠÙ‚Ø¨Ù„ Ø§Ù„Ù‚Ø³Ù…Ø©.
                                        </p>
                                        <p>ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø¨Ù†Ù†Ø§Ø¯ÙŠ Ø§Ù„Ù€ Kernel Ø¨Ù€ <code><<<blocks, threads>>></code>.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part F -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part F - Device to Host Memory Transfer (2 marks):</strong><br>
                                    Copy result from d_C back to h_C.
                                </div>
                                <div class="qa-answer-block">
                                    <div class="qa-english">
                                        <div class="label-eng">Answer Code</div>
                                        <div class="code-block">
                                            <div class="code-line">cudaMemcpy(h_C, d_C, bytes, cudaMemcpyDeviceToHost);
                                            </div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ø¨Ù†Ø±Ø¬Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ø±Øª Ù„Ù„Ø±Ø§Ù…Ø§Øª Ø¹Ø´Ø§Ù† Ù†Ù‚Ø¯Ø± Ù†Ø´ÙˆÙÙ‡Ø§ Ø£Ùˆ Ù†Ø·Ø¨Ø¹Ù‡Ø§. Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ù‡Ù†Ø§:
                                            <code>cudaMemcpyDeviceToHost</code>.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part G -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part G - Memory Cleanup (2 marks):</strong><br>
                                    Free all device memory using cudaFree().
                                </div>
                                <div class="qa-answer-block">
                                    <div class="qa-english">
                                        <div class="label-eng">Answer Code</div>
                                        <div class="code-block">
                                            <div class="code-line">cudaFree(d_A); cudaFree(d_B); cudaFree(d_C);</div>
                                            <div class="code-line">free(h_A); free(h_B); free(h_C);</div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ù†Ø¸Ø§ÙØ© Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù…Ù‡Ù…Ø© Ø¹Ø´Ø§Ù† Ù…Ø¨ÙŠØ­ØµÙ„Ø´ Memory Leak.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part H -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part H - Thread Count Calculation (1 mark):</strong><br>
                                    State total number of threads launched.
                                </div>
                                <div class="qa-answer-block">
                                    <div class="qa-english">
                                        <div class="label-eng">Answer</div>
                                        <p>Blocks = (1024 + 255)/256 = 4 blocks.</p>
                                        <p>Total Threads = 4 * 256 = <strong>1024 Threads</strong>.</p>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ø¨Ù…Ø§ Ø¥Ù†Ù†Ø§ Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ 4 Ø¨Ù„ÙˆÙƒØ§ØªØŒ ÙˆÙƒÙ„ Ø¨Ù„ÙˆÙƒ ÙÙŠÙ‡ 256 Ø®ÙŠØ·ØŒ ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 1024 Ø®ÙŠØ·.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Question 2</span>
                        <span class="question-marks">8 marks</span>
                    </div>

                    <div class="question-content">
                        <p><strong>Write ONLY the kernel function for vector addition with boundary checking.</strong>
                        </p>
                        <p>Given: Vector size N may NOT be a multiple of block size</p>
                    </div>

                    <div class="qa-container">
                        <!-- Part A -->
                        <div class="qa-pair">
                            <div class="qa-question">
                                <strong>Part A - Kernel Function (4 marks):</strong><br>
                                Write the complete vecAdd kernel function.
                            </div>
                            <div class="qa-answer-block">
                                <div class="qa-english">
                                    <div class="label-eng">Answer Code</div>
                                    <div class="code-block">
                                        <div class="code-line"><span class="code-keyword">__global__</span> <span
                                                class="code-keyword">void</span> <span
                                                class="code-function">vecAdd</span>(<span class="code-type">float</span>
                                            *A, <span class="code-type">float</span> *B, <span
                                                class="code-type">float</span> *C, <span class="code-type">int</span> N)
                                            {</div>
                                        <div class="code-line"> <span class="code-type">int</span> i = blockIdx.x *
                                            blockDim.x + threadIdx.x;</div>
                                        <div class="code-line"> <span class="code-keyword">if</span> (i < N) {</div>
                                                <div class="code-line"> C[i] = A[i] + B[i];</div>
                                                <div class="code-line"> }</div>
                                                <div class="code-line">}</div>
                                        </div>
                                    </div>
                                    <div class="qa-arabic">
                                        <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                        <p>Ù†ÙØ³ ÙÙƒØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„ÙŠ ÙØ§ØªØŒ Ø¨Ø³ Ù‡Ù†Ø§ Ø¨Ù†Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù€ Kernel Ø¨Ø³.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Part B -->
                            <div class="qa-pair">
                                <div class="qa-question">
                                    <strong>Part B - Boundary Check Logic (2 marks):</strong><br>
                                    Explain why boundary checking (if i < N) is necessary. </div>
                                        <div class="qa-answer-block">
                                            <div class="qa-english">
                                                <div class="label-eng">Answer</div>
                                                <p><strong>Block size alignment:</strong> We often launch more threads
                                                    than N because block size is fixed (e.g., 256). The extra threads
                                                    must be prevented from accessing invalid memory.</p>
                                            </div>
                                            <div class="qa-arabic">
                                                <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                                <p>Ø¹Ø´Ø§Ù† Ù„Ùˆ N Ù…Ø´ Ø¨ÙŠÙ‚Ø¨Ù„ Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ Ø­Ø¬Ù… Ø§Ù„Ø¨Ù„ÙˆÙƒØŒ Ù‡ÙŠØªØ¨Ù‚Ù‰ threads Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø¢Ø®Ø±
                                                    Ø¨Ù„ÙˆÙƒ. Ù„Ùˆ Ø³ÙŠØ¨Ù†Ø§Ù‡Ù… ÙŠØ´ØªØºÙ„ÙˆØ§ Ù‡ÙŠØ¨ÙˆØ¸ÙˆØ§ Ø§Ù„Ø°Ø§ÙƒØ±Ø©.</p>
                                            </div>
                                        </div>
                                </div>

                                <!-- Part C -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>Part C - Consequences (2 marks):</strong><br>
                                        What happens without boundary checking if total_threads > N?
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer</div>
                                            <div class="warning-box">
                                                <strong>âš ï¸ Consequences:</strong>
                                                <ul>
                                                    <li>Memory corruption (writing to invalid addresses)</li>
                                                    <li>Segmentation fault (crash)</li>
                                                    <li>Incorrect results</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">ØªØ­Ø°ÙŠØ±</div>
                                            <p>Ù…Ù…ÙƒÙ† ÙŠØ­ØµÙ„ Crash Ù„Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø£Ùˆ Ø§Ù„Ù†ØªÙŠØ¬ ØªØ·Ù„Ø¹ ØºÙ„Ø· Ø¨Ø³Ø¨Ø¨ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
                                                ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Question 3 -->
                        <div class="question">
                            <div class="question-header">
                                <span class="question-number">Question 3</span>
                                <span class="question-marks">6 marks</span>
                            </div>

                            <div class="question-content">
                                <p><strong>Kernel Launch Configuration Analysis:</strong></p>
                                <p>Given: Vector addition kernel for N=2048 elements</p>
                            </div>

                            <div class="qa-container">
                                <!-- Part A -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>Part A - Number of Blocks (2 marks):</strong><br>
                                        If using 256 threads per block, how many blocks are needed?
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer</div>
                                            <p>blocks = 2048 / 256 = <strong>8 blocks</strong>.</p>
                                            <p>(Since 2048 is divisible by 256, no extra block needed).</p>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ø§Ù„Ø­Ù„</div>
                                            <p>Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†: Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ / Ø³Ø¹Ø© Ø§Ù„Ø¨Ù„ÙˆÙƒ.</p>
                                            <p>2048 / 256 = 8 Ø¨Ù„ÙˆÙƒØ§Øª Ø¨Ø§Ù„Ø¸Ø¨Ø·.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Part B -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>Part B - Launch Statement (2 marks):</strong><br>
                                        Write the kernel launch statement.
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer Code</div>
                                            <div class="code-block">
                                                <div class="code-line">vecAdd<<<8, 256>>>(d_A, d_B, d_C, 2048);</div>
                                            </div>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ø§Ù„Ø­Ù„</div>
                                            <p>Ø¨Ù†ÙƒØªØ¨: <code>vecAdd<<<8, 256>>>(...)</code>.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Part C -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>Part C - Index Calculation (2 marks):</strong><br>
                                        If a thread has blockIdx.x=5 and threadIdx.x=100, which element does it compute?
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer</div>
                                            <div class="code-block">
                                                <div class="code-line">i = blockIdx.x * blockDim.x + threadIdx.x</div>
                                                <div class="code-line">i = 5 * 256 + 100</div>
                                                <div class="code-line">i = 1280 + 100 = <strong>1380</strong></div>
                                            </div>
                                            <p>It computes <strong>C[1380]</strong>.</p>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                            <p>Ù‚Ø¨Ù„Ùƒ 5 Ø¹Ù…Ø§ÙŠØ± (Ø¨Ù„ÙˆÙƒØ§Øª) ÙƒØ§Ù…Ù„ÙŠÙ†: 5 Ã— 256 = 1280.</p>
                                            <p>ÙˆØ§Ù†Øª ÙÙŠ Ø§Ù„Ø´Ù‚Ø© 100. ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 1280 + 100 = 1380.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 2: MEMORY MANAGEMENT -->
                        <div class="section section-memory">
                            <h2 class="section-header">Section 2: CUDA Memory Management (25%)</h2>
                            <p class="section-description">
                                Essential API functions for dynamic memory allocation and data transfer
                            </p>
                        </div>

                        <!-- Question 4 -->
                        <div class="question">
                            <div class="question-header">
                                <span class="question-number">Question 4</span>
                                <span class="question-marks">10 marks</span>
                            </div>

                            <div class="question-content">
                                <p><strong>Explain the three essential CUDA memory management functions.</strong></p>
                                <p>For each function, provide the syntax, purpose, and a brief code example.</p>
                            </div>

                            <div class="qa-container">
                                <!-- Part A -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>1. cudaMalloc() (4 marks):</strong><br>
                                        Explain cudaMalloc and provided an example.
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer Code</div>
                                            <div class="code-block">
                                                <div class="code-line"><span class="code-comment">// Syntax</span></div>
                                                <div class="code-line">cudaError_t <span
                                                        class="code-function">cudaMalloc</span>(<span
                                                        class="code-type">void**</span> devPtr, <span
                                                        class="code-type">size_t</span> size);</div>
                                                <div class="code-line"></div>
                                                <div class="code-line"><span class="code-comment">// Example</span>
                                                </div>
                                                <div class="code-line"><span class="code-type">float</span> *d_array;
                                                </div>
                                                <div class="code-line"><span class="code-type">int</span> bytes = 256 *
                                                    <span class="code-keyword">sizeof</span>(<span
                                                        class="code-type">float</span>);
                                                </div>
                                                <div class="code-line"><span
                                                        class="code-function">cudaMalloc</span>((<span
                                                        class="code-type">void**</span>)&d_array, bytes);</div>
                                            </div>
                                            <p><strong>Purpose:</strong> Allocates memory on the GPU (Global Memory).
                                            </p>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                            <p>Ø¯ÙŠ Ø²ÙŠ <code>malloc</code> Ø¨ØªØ§Ø¹Ø© Ø§Ù„Ù€ C Ø¨Ø³ Ø¨ØªØ­Ø¬Ø² Ø¹Ù„Ù‰ ÙƒØ§Ø±Øª Ø§Ù„Ø´Ø§Ø´Ø© (VRAM).
                                            </p>
                                            <p>Ø§Ù„ØªØ±ÙƒØ§ÙŠØ© Ù‡Ù†Ø§ Ø¥Ù†Ù‡Ø§ Ø¨ØªØ§Ø®Ø¯ Pointer to Pointer (<code>void**</code>) Ø¹Ø´Ø§Ù† Ù‡ÙŠ
                                                Ø¨ØªØ±Ø¬Ø¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙŠ Ø­Ø¬Ø²ØªÙ‡ ÙÙŠ Ø§Ù„Ø¨ÙˆÙŠÙ†ØªØ± Ø¯Ù‡.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Part B -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>2. cudaMemcpy() (4 marks):</strong><br>
                                        Explain cudaMemcpy and provide an example.
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer Code</div>
                                            <div class="code-block">
                                                <div class="code-line"><span class="code-comment">// Syntax</span></div>
                                                <div class="code-line">cudaError_t <span
                                                        class="code-function">cudaMemcpy</span>(<span
                                                        class="code-type">void*</span> dst, <span
                                                        class="code-type">const void*</span> src, <span
                                                        class="code-type">size_t</span> count, cudaMemcpyKind kind);
                                                </div>
                                                <div class="code-line"></div>
                                                <div class="code-line"><span class="code-comment">// Example (Host to
                                                        Device)</span></div>
                                                <div class="code-line"><span
                                                        class="code-function">cudaMemcpy</span>(d_A, h_A, bytes, <span
                                                        class="code-keyword">cudaMemcpyHostToDevice</span>);</div>
                                            </div>
                                            <p><strong>Purpose:</strong> Copies data between Host (CPU) and Device
                                                (GPU). Requires direction.</p>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                            <p>Ø¯ÙŠ ÙˆØ³ÙŠÙ„Ø© Ø§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª. Ø¹Ø´Ø§Ù† ØªÙ†Ù‚Ù„ Ø¯Ø§ØªØ§ Ù…Ù† Ø§Ù„Ù€ CPU Ù„Ù„Ù€ GPU Ø£Ùˆ Ø§Ù„Ø¹ÙƒØ³.</p>
                                            <p>Ù„Ø§Ø²Ù… ØªØ­Ø¯Ø¯ 4 Ø­Ø§Ø¬Ø§Øª: Ø±Ø§ÙŠØ­ ÙÙŠÙ† (Dest)ØŒ Ø¬Ø§ÙŠ Ù…Ù†ÙŠÙ† (Src)ØŒ Ù‚Ø¯ Ø§ÙŠÙ‡ (Size)ØŒ ÙˆØ§ØªØ¬Ø§Ù‡
                                                Ø§Ù„Ø³ÙØ± (Direction).</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Part C -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>3. cudaFree() (1 mark):</strong><br>
                                        Explain cudaFree.
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer Code</div>
                                            <div class="code-block">
                                                <div class="code-line"><span
                                                        class="code-function">cudaFree</span>(d_array);</div>
                                            </div>
                                            <p><strong>Purpose:</strong> Frees memory on the GPU to prevent leaks.</p>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ø§Ù„Ø´Ø±Ø­</div>
                                            <p>Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹ Ø¹Ø´Ø§Ù† Ù…ØªØ¹Ù…Ù„Ø´ Memory Leak. Ø¨ØªÙ†Ø¶Ù Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù„ÙŠ Ø­Ø¬Ø²ØªÙ‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„ÙƒØ§Ø±Øª
                                                Ù„Ù…Ø§ ØªØ®Ù„Øµ.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Part D -->
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <strong>Why special functions? (1 mark):</strong><br>
                                        Why can't we just use standard malloc and memcpy?
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="label-eng">Answer</div>
                                            <p>CPU and GPU have separate physical memory spaces (RAM vs VRAM). The CPU
                                                cannot directly access GPU memory pointers.</p>
                                        </div>
                                        <div class="qa-arabic">
                                            <div class="label-ar">Ù„ÙŠÙ‡ØŸ</div>
                                            <p>Ø¹Ø´Ø§Ù† Ø§Ù„Ø±Ø§Ù…Ø§Øª (RAM) ÙˆÙƒØ§Ø±Øª Ø§Ù„Ø´Ø§Ø´Ø© (VRAM) Ø¯ÙˆÙ„ Ø¬Ù‡Ø§Ø²ÙŠÙ† Ù…Ø®ØªÙ„ÙÙŠÙ† Ù…ÙØµÙˆÙ„ÙŠÙ†. Ø§Ù„Ù€
                                                CPU Ù…Ø´ Ø¨ÙŠÙ‚Ø¯Ø± ÙŠØ´ÙˆÙ Ø£Ùˆ ÙŠÙƒØªØ¨ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ VRAMØŒ ÙÙ„Ø§Ø²Ù… Ø¯ÙˆØ§Ù„ Ø®Ø§ØµØ©.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>






                        <!-- Question 5 -->
                        <!-- Question 5 -->
                        <div class="question">
                            <div class="question-header">
                                <span class="question-number">Question 5</span>
                                <span class="question-marks">5 marks</span>
                            </div>

                            <div class="qa-container">
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <p><strong>Given the following CUDA code, identify and explain THREE
                                                errors:</strong></p>
                                        <div class="code-block">
                                            <div class="code-line"><span class="code-type">int</span> N = 512;</div>
                                            <div class="code-line"><span class="code-type">float</span> *h_data = (<span
                                                    class="code-type">float</span>*)<span
                                                    class="code-function">malloc</span>(N * <span
                                                    class="code-keyword">sizeof</span>(<span
                                                    class="code-type">float</span>));</div>
                                            <div class="code-line"><span class="code-type">float</span> *d_data;</div>
                                            <div class="code-line"></div>
                                            <div class="code-line"><span class="code-comment">// Error 1?</span></div>
                                            <div class="code-line"></div>
                                            <div class="code-line"><span class="code-function">cudaMemcpy</span>(d_data,
                                                h_data, N, <span class="code-keyword">cudaMemcpyHostToDevice</span>);
                                            </div>
                                            <div class="code-line"></div>
                                            <div class="code-line"><span
                                                    class="code-function">myKernel</span>&lt;&lt;&lt;2,
                                                256&gt;&gt;&gt;(d_data);</div>
                                            <div class="code-line"></div>
                                            <div class="code-line"><span class="code-function">cudaMemcpy</span>(h_data,
                                                d_data, N * <span class="code-keyword">sizeof</span>(<span
                                                    class="code-type">float</span>), <span
                                                    class="code-keyword">cudaMemcpyHostToDevice</span>);</div>
                                            <div class="code-line"></div>
                                            <div class="code-line"><span class="code-function">free</span>(h_data);
                                            </div>
                                            <div class="code-line"><span class="code-comment">// Error 3?</span></div>
                                        </div>
                                        <p style="margin-top: 15px;"><strong>Identify Error 1 (Allocation):</strong></p>
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="warning-box">
                                                <strong>âŒ ERROR 1: Missing cudaMalloc() (2 marks)</strong>
                                                <p><strong>Problem:</strong> Device pointer <code>d_data</code> is
                                                    declared but never allocated memory.</p>
                                                <p><strong>Consequence:</strong> <code>cudaMemcpy()</code> will fail
                                                    because <code>d_data</code> points to nowhere (uninitialized
                                                    pointer).</p>
                                                <p><strong>Fix:</strong> Add <code>cudaMalloc</code> before the first
                                                    memcpy.</p>
                                                <div class="code-block">
                                                    <div class="code-line"><span
                                                            class="code-function">cudaMalloc</span>((<span
                                                            class="code-type">void**</span>)&amp;d_data, N * <span
                                                            class="code-keyword">sizeof</span>(<span
                                                            class="code-type">float</span>));</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="qa-arabic">
                                            <strong>1. Ø§Ù„ØºÙ„Ø·Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ù†Ø³ÙŠ ÙŠØ­Ø¬Ø²):</strong>
                                            <p>Ù‡Ùˆ Ø¹Ø±Ù <code>d_data</code> Ø¨Ø³ Ù…Ø­Ø¬Ø²Ù„Ù‡ÙˆØ´ Ù…ÙƒØ§Ù† Ø¨Ù€ <code>cudaMalloc</code>.
                                                ÙØ§Ù„Ø¨ÙˆÙŠÙ†ØªØ± Ø¯Ù‡ Ø¨ÙŠØ´Ø§ÙˆØ± Ø¹Ù„Ù‰ "Ù„Ø§ Ø´ÙŠØ¡".
                                                Ù„Ù…Ø§ ÙŠØ¬ÙŠ ÙŠÙ†Ù‚Ù„ Ø¹Ù„ÙŠÙ‡ Ø¯Ø§ØªØ§ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù‡ÙŠØ¶Ø±Ø¨.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="qa-container">
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <p><strong>Identify Error 2 (Data Transfer Size):</strong></p>
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="warning-box">
                                                <strong>âŒ ERROR 2: Wrong size in first cudaMemcpy() (2 marks)</strong>
                                                <p><strong>Problem:</strong> First <code>cudaMemcpy</code> uses
                                                    <code>N</code> (512) instead of <code>N * sizeof(float)</code>
                                                    (2048).
                                                </p>
                                                <p><strong>Consequence:</strong> Only copies 512 bytes instead of 2048
                                                    bytes, so only 128 floats are transferred.</p>
                                                <p><strong>Fix:</strong> Use <code>N * sizeof(float)</code>.</p>
                                            </div>
                                        </div>
                                        <div class="qa-arabic">
                                            <strong>2. Ø§Ù„ØºÙ„Ø·Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ù„Ø­Ø¬Ù… ØºÙ„Ø·):</strong>
                                            <p>ÙÙŠ Ø£ÙˆÙ„ Ù†Ù‚Ù„Ø©ØŒ ÙƒØªØ¨ Ø§Ù„Ø­Ø¬Ù… <code>N</code> Ø¨Ø³ (Ø§Ù„Ù„ÙŠ Ù‡Ùˆ 512). Ø¨Ø³ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±
                                                Ø¨ÙŠÙÙ‡Ù… Ø¨Ø§Ù„Ø¨Ø§ÙŠØª!
                                                <br>Ù„Ø§Ø²Ù… ÙŠØ¶Ø±Ø¨ ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙˆØ§Ø­Ø¯: <code>N * sizeof(float)</code>.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="qa-container">
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <p><strong>Identify Error 3 (Transfer Direction):</strong></p>
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="warning-box">
                                                <strong>âŒ ERROR 3: Wrong direction in second cudaMemcpy() (1
                                                    mark)</strong>
                                                <p><strong>Problem:</strong> Second <code>cudaMemcpy</code> uses
                                                    <code>cudaMemcpyHostToDevice</code> when it should be
                                                    <code>DeviceToHost</code>.
                                                </p>
                                                <p><strong>Consequence:</strong> Overwrites the results on the GPU with
                                                    old CPU data instead of retrieving results.</p>
                                                <p><strong>Fix:</strong> Use <code>cudaMemcpyDeviceToHost</code>.</p>
                                            </div>
                                        </div>
                                        <div class="qa-arabic">
                                            <strong>3. Ø§Ù„ØºÙ„Ø·Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© (Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ØºÙ„Ø·):</strong>
                                            <p>ÙˆÙ‡Ùˆ Ø¨ÙŠØ±Ø¬Ø¹ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ø¢Ø®Ø± Ù†Ù‚Ù„Ø©)ØŒ Ø§Ù„Ù…ÙØ±ÙˆØ¶ ÙŠÙ†Ù‚Ù„ Ù…Ù† Device Ù„Ù€ Host.
                                                <br>Ù‡Ùˆ ÙƒØªØ¨ Ø§Ù„Ø¹ÙƒØ³ <code>cudaMemcpyHostToDevice</code>ØŒ ÙŠØ¹Ù†ÙŠ Ø¨ÙŠÙ…Ø³Ø­ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                                                Ø§Ù„Ù„ÙŠ Ø­Ø³Ø¨Ù‡Ø§ (Ø¹Ù„Ù‰ d_data) Ø¨Ø§Ù„Ø¯Ø§ØªØ§ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù€ Host!
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="qa-container">
                                <div class="qa-pair">
                                    <div class="qa-question">
                                        <p><strong>Bonus: Are there other issues?</strong></p>
                                    </div>
                                    <div class="qa-answer-block">
                                        <div class="qa-english">
                                            <div class="warning-box">
                                                <strong>BONUS ERROR: Missing cudaFree(d_data)</strong>
                                                <p>Device memory is never freed, causing memory leak on GPU!</p>
                                                <p><strong>Fix:</strong> Add <code>cudaFree(d_data);</code> before
                                                    program ends.</p>
                                            </div>
                                        </div>
                                        <div class="qa-arabic">
                                            <strong>Ø¨ÙˆÙ†Øµ:</strong>
                                            <p>Ù†Ø³ÙŠ ÙŠØ¹Ù…Ù„ <code>cudaFree</code> ÙÙŠ Ø§Ù„Ø¢Ø®Ø±. Ø¯ÙŠ Ù…Ø´ Ù‡ØªØ¹Ù…Ù„ Crash Ø¨Ø³ Ø¹ÙŠØ¨ ÙÙ†ÙŠ
                                                (Memory Leak).</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SECTION 3: MATRIX MULTIPLICATION -->
                        <div class="section section-matrix">
                            <h2 class="section-header">Section 3: Matrix
                                Multiplication (15%)</h2>
                            <p class="section-description">
                                Matrix multiplication kernel implementation and
                                optimization concepts
                            </p>

                            <!-- Question 6 -->
                            <div class="question">
                                <div class="question-header">
                                    <span class="question-number">Question 6</span>
                                    <span class="question-marks">9 marks</span>
                                </div>

                                <div class="qa-container">
                                    <div class="qa-pair">
                                        <div class="qa-question">
                                            <p><strong>Explain the matrix multiplication kernel
                                                    (Naive/No-Tiling).</strong></p>
                                            <p>Given P = M Ã— N (all WIDTH Ã— WIDTH).</p>
                                            <p style="margin-top: 15px;"><strong>Part 1: Write the kernel that computes
                                                    one element of P per thread (5 marks).</strong></p>
                                        </div>
                                        <div class="qa-answer-block">
                                            <div class="qa-english">
                                                <h3 style="color: #22c55e;">âœ… Naive Matrix Multiplication Kernel:</h3>
                                                <div class="code-block">
                                                    <div class="code-line"><span class="code-keyword">__global__</span>
                                                        <span class="code-keyword">void</span> <span
                                                            class="code-function">MatrixMulKernel</span>(Matrix M,
                                                        Matrix N, Matrix P) {
                                                    </div>
                                                    <div class="code-line"> <span class="code-comment">// 2D Thread
                                                            ID</span></div>
                                                    <div class="code-line"> <span class="code-type">int</span> tx =
                                                        threadIdx.x; <span class="code-comment">// Column</span></div>
                                                    <div class="code-line"> <span class="code-type">int</span> ty =
                                                        threadIdx.y; <span class="code-comment">// Row</span></div>
                                                    <div class="code-line"></div>
                                                    <div class="code-line"> <span class="code-comment">// Pvalue stores
                                                            the element of P computed by this thread</span></div>
                                                    <div class="code-line"> <span class="code-type">float</span> Pvalue
                                                        = 0;</div>
                                                    <div class="code-line"></div>
                                                    <div class="code-line"> <span class="code-comment">// Loop over M
                                                            row and N column</span></div>
                                                    <div class="code-line"> <span class="code-keyword">for</span> (<span
                                                            class="code-type">int</span> k = 0; k &lt; M.width; ++k) {
                                                    </div>
                                                    <div class="code-line"> <span class="code-type">float</span>
                                                        Melement = M.elements[ty * M.pitch + k];</div>
                                                    <div class="code-line"> <span class="code-type">float</span>
                                                        Nelement = N.elements[k * N.pitch + tx];</div>
                                                    <div class="code-line"> Pvalue += Melement * Nelement;</div>
                                                    <div class="code-line"> }</div>
                                                    <div class="code-line"></div>
                                                    <div class="code-line"> <span class="code-comment">// Write result
                                                            to global memory</span></div>
                                                    <div class="code-line"> P.elements[ty * P.pitch + tx] = Pvalue;
                                                    </div>
                                                    <div class="code-line">}</div>
                                                </div>
                                            </div>
                                            <div class="qa-arabic">
                                                <strong>1. Ø§Ù„ÙƒÙˆØ¯ (Naive Kernel):</strong>
                                                <p>Ø¯Ù‡ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† ØºÙŠØ± ØªØ­Ø³ÙŠÙ†Ø§Øª.
                                                    <br>Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: ÙƒÙ„ <code>Thread</code> Ù…Ø³Ø¦ÙˆÙ„ Ø¹Ù† Ø­Ø³Ø§Ø¨ Ù‚ÙŠÙ…Ø© Ø¹Ù†ØµØ±
                                                    ÙˆØ§Ø­Ø¯ Ø¨Ø³ ÙÙŠ Ø§Ù„Ù…ØµÙÙˆÙØ© <code>P</code>.
                                                    <br>Ø¨ÙŠØ¹Ù…Ù„ Loop ÙŠØ¶Ø±Ø¨ ØµÙ Ù…Ù† <code>M</code> ÙÙŠ Ø¹Ù…ÙˆØ¯ Ù…Ù† <code>N</code>
                                                    ÙˆÙŠØ¬Ù…Ø¹Ù‡Ù….
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="qa-container">
                                    <div class="qa-pair">
                                        <div class="qa-question">
                                            <p><strong>Part 2: Explain how Thread IDs map to Matrix Elements (2
                                                    marks).</strong></p>
                                        </div>
                                        <div class="qa-answer-block">
                                            <div class="qa-english">
                                                <ul>
                                                    <li><strong>2D Mapping:</strong> Use <code>tx = threadIdx.x</code>
                                                        for Column and <code>ty = threadIdx.y</code> for Row.</li>
                                                    <li><strong>One Thread = One Element:</strong> Thread (tx, ty)
                                                        computes <code>P[ty][tx]</code> (or <code>P[row][col]</code>).
                                                    </li>
                                                    <li><strong>Indexing:</strong> Accesses are linearized as
                                                        <code>ty * width + tx</code>.
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="qa-arabic">
                                                <strong>2. Ø±Ø¨Ø· Ø§Ù„Ù€ Threads Ø¨Ø§Ù„Ù…ØµÙÙˆÙØ©:</strong>
                                                <p>Ø¨Ù†Ø³ØªØ®Ø¯Ù… 2D Grid Ù…Ù† Ø§Ù„Ù€ Threads.
                                                    <br>Ø§Ù„Ù€ <code>x</code> (threadIdx.x) Ù‡Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙˆØ¯.
                                                    <br>Ø§Ù„Ù€ <code>y</code> (threadIdx.y) Ù‡Ùˆ Ø±Ù‚Ù… Ø§Ù„ØµÙ.
                                                    <br>ÙŠØ¹Ù†ÙŠ Ù„Ùˆ Ø¹Ø§ÙŠØ² ØªØ­Ø³Ø¨ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù„ÙŠ ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ù†ÙŠ ÙˆØ§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ØªØ§Ù„ØªØŒ Ø§Ù„Ù€
                                                    Thread (3, 2) Ù‡Ùˆ Ø§Ù„Ù„ÙŠ Ù‡ÙŠØ­Ø³Ø¨Ù‡.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="qa-container">
                                    <div class="qa-pair">
                                        <div class="qa-question">
                                            <p><strong>Part 3: Why is this version memory-intensive and inefficient? (2
                                                    marks)</strong></p>
                                        </div>
                                        <div class="qa-answer-block">
                                            <div class="qa-english">
                                                <div class="warning-box">
                                                    <strong>âš ï¸ Memory Inefficiency:</strong>
                                                    <ul>
                                                        <li><strong>Repeated Global Memory Reads:</strong> Each element
                                                            of M and N is read <code>width</code> times from Global
                                                            Memory.</li>
                                                        <li><strong>Slow Access:</strong> Global Memory is slow (~300
                                                            cycles) compared to Shared Memory (~2 cycles).</li>
                                                        <li><strong>Low Compute-to-Memory Ratio:</strong> Ratio is close
                                                            to 1:1, making the kernel <strong>Bandwidth Bound</strong>.
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="qa-arabic">
                                                <strong>3. Ù„ÙŠÙ‡ Ø§Ù„ÙƒÙˆØ¯ Ø¯Ù‡ Ø¨Ø·ÙŠØ¡ (Inefficient)ØŸ</strong>
                                                <p>Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù‡ÙŠ <strong>Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Memory)</strong>:
                                                    <br>- Ø§Ù„ÙƒÙˆØ¯ Ø¨ÙŠÙ‚Ø±Ø§ Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù† Ø§Ù„Ù€ Global Memory (Ø§Ù„Ù„ÙŠ Ù‡ÙŠ Ø¨Ø·ÙŠØ¦Ø©
                                                    Ø¬Ø¯Ø§Ù‹) ÙƒØ°Ø§ Ù…Ø±Ø©.
                                                    <br>- ÙƒÙ„ Ø¹Ù†ØµØ± Ø¨ÙŠØªÙ‚Ø±ÙŠ <code>N</code> Ù…Ø±Ø© (Ø¹Ø±Ø¶ Ø§Ù„Ù…ØµÙÙˆÙØ©).
                                                    <br>- <strong>Ø§Ù„Ø­Ù„:</strong> Ù†Ø³ØªØ®Ø¯Ù… Tiling Ùˆ Shared Memory Ø¹Ø´Ø§Ù† Ù†Ù‚Ø±Ø£
                                                    Ø§Ù„Ø¯Ø§ØªØ§ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆÙ†Ø¹Ù…Ù„Ù‡Ø§ Reuse Ø¨Ø³Ø±Ø¹Ø©.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- SECTION 4: GPU ARCHITECTURE -->
                            <div class="section section-gpu">
                                <h2 class="section-header">Section
                                    4: GPU Architecture Comparison
                                    (10%)</h2>
                                <p class="section-description">
                                    NVIDIA G80 GPU Architecture
                                    specifications and
                                    characteristics
                                </p>

                                <!-- Question 7 -->
                                <div class="question">
                                    <div class="question-header">
                                        <span class="question-number">Question 7</span>
                                        <span class="question-marks">6 marks</span>
                                    </div>

                                    <div class="qa-container">
                                        <div class="qa-pair">
                                            <div class="qa-question">
                                                <p><strong>Based on NVIDIA G80 Architecture:</strong></p>
                                                <p style="margin-top: 10px;"><strong>a) How many Multiprocessors (MPs)
                                                        and Streaming Processors (SPs) per MP? (2 marks)</strong></p>
                                            </div>
                                            <div class="qa-answer-block">
                                                <div class="qa-english">
                                                    <ul>
                                                        <li><strong>Multiprocessors (MPs):</strong> 16 MPs.</li>
                                                        <li><strong>Streaming Processors (SPs) per MP:</strong> 8 SPs.
                                                        </li>
                                                        <li>Each MP is a block containing 8 CUDA cores.</li>
                                                    </ul>
                                                </div>
                                                <div class="qa-arabic">
                                                    <strong>1. Ø§Ù„Ù‡ÙŠÙƒÙ„ (MPs & SPs):</strong>
                                                    <p>Ø§Ù„ÙƒØ§Ø±Øª Ù…Ù‚Ø³Ù… Ù„Ù€ 16 Ø¨Ù„ÙˆÙƒ ÙƒØ¨ÙŠØ± Ø§Ø³Ù…Ù‡Ù… <strong>Multiprocessors
                                                            (MPs)</strong>.
                                                        <br>Ø¬ÙˆÙ‡ ÙƒÙ„ Ø¨Ù„ÙˆÙƒ ÙÙŠÙ‡ 8 ØµÙ†Ø§ÙŠØ¹ÙŠØ© ØµØºØ§Ø± Ø§Ø³Ù…Ù‡Ù… <strong>Streaming
                                                            Processors (SPs)</strong> Ø£Ùˆ Cores.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="qa-container">
                                        <div class="qa-pair">
                                            <div class="qa-question">
                                                <p><strong>b) Calculate the Total CUDA Cores (1 mark).</strong></p>
                                            </div>
                                            <div class="qa-answer-block">
                                                <div class="qa-english">
                                                    <div class="code-block">
                                                        <div class="code-line">Total Cores = MPs Ã— SPs per MP</div>
                                                        <div class="code-line">Total Cores = 16 Ã— 8</div>
                                                        <div class="code-line">Total Cores = <span class="highlight">128
                                                                CUDA Cores</span></div>
                                                    </div>
                                                </div>
                                                <div class="qa-arabic">
                                                    <strong>2. Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ (Total Cores):</strong>
                                                    <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ù„ÙˆÙƒØ§Øª (16) ÙÙŠ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ†Ø§ÙŠØ¹ÙŠØ© ÙÙŠ ÙƒÙ„ Ø¨Ù„ÙˆÙƒ (8) = 128 ÙƒÙˆØ±.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="qa-container">
                                        <div class="qa-pair">
                                            <div class="qa-question">
                                                <p><strong>c) How much Shared Memory is available per MP? (1
                                                        mark)</strong></p>
                                            </div>
                                            <div class="qa-answer-block">
                                                <div class="qa-english">
                                                    <p><strong>Answer:</strong> <span class="highlight">16KB (16,384
                                                            bytes)</span> per Multiprocessor.</p>
                                                    <p>Organized in 16 banks to avoid conflicts.</p>
                                                </div>
                                                <div class="qa-arabic">
                                                    <strong>3. Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (Shared Memory):</strong>
                                                    <p>ÙƒÙ„ Ø¨Ù„ÙˆÙƒ (MP) Ø¹Ù†Ø¯Ù‡ <strong>16KB</strong> Ø°Ø§ÙƒØ±Ø© Ø³Ø±ÙŠØ¹Ø© Ø®Ø§ØµØ© Ø¨ÙŠÙ‡. Ø¯ÙŠ
                                                        Ø§Ù„Ù„ÙŠ Ø¨Ù†Ø³Ù…ÙŠÙ‡Ø§ Shared Memory.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="qa-container">
                                        <div class="qa-pair">
                                            <div class="qa-question">
                                                <p><strong>d) Compare Memory Access Latencies (Shared vs Global) (2
                                                        marks).</strong></p>
                                            </div>
                                            <div class="qa-answer-block">
                                                <div class="qa-english">
                                                    <table>
                                                        <tr>
                                                            <th>Memory Type</th>
                                                            <th>Latency</th>
                                                            <th>Comparison</th>
                                                        </tr>
                                                        <tr>
                                                            <td>Shared</td>
                                                            <td><span class="highlight">~2 cycles</span></td>
                                                            <td>Very Fast</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Global (Device)</td>
                                                            <td><span class="highlight">~300 cycles</span></td>
                                                            <td>150x Slower</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="qa-arabic">
                                                    <strong>4. ÙØ±Ù‚ Ø§Ù„Ø³Ø±Ø¹Ø© (Latency):</strong>
                                                    <p>- <strong>Shared Memory:</strong> Ø³Ø±ÙŠØ¹Ø© Ø¬Ø¯Ø§Ù‹ (Ø­ÙˆØ§Ù„ÙŠ 2 cycles).
                                                        <br>- <strong>Global Memory:</strong> Ø¨Ø·ÙŠØ¦Ø© Ø¬Ø¯Ø§Ù‹ (Ø­ÙˆØ§Ù„ÙŠ 300
                                                        cycles).
                                                        <br>Ø¹Ø´Ø§Ù† ÙƒØ¯Ù‡ Ù„Ø§Ø²Ù… Ù†Ù†Ù‚Ù„ Ø§Ù„Ø¯Ø§ØªØ§ Ù„Ù„Ù€ Shared Memory Ø¹Ø´Ø§Ù† Ù†Ø³Ø±Ø¹ Ø§Ù„ÙƒÙˆØ¯.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <footer>
                                <p>ğŸ“š HPC Exam -
                                    CUDA
                                    Implementation &
                                    Add Vector
                                    Program |
                                    Lecture 7-8 Part
                                    2
                                </p>
                                <p>â­ THE MAIN CUDA
                                    PROGRAMMING EXAM
                                    - Focus on
                                    practical
                                    implementation â­
                                </p>
                                <p style="margin-top: 10px; font-size: 0.85em;">
                                    Generated based
                                    on lecture
                                    slides - Master
                                    the Add Vector
                                    program!</p>
                            </footer>
                        </div>


</body>

</html>